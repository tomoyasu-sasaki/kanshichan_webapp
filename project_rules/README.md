# ğŸ“‹ KanshiChan ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦ç´„

## ğŸ“– æ¦‚è¦
ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€KanshiChanï¼ˆç›£è¦–ã¡ã‚ƒã‚“ï¼‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹ç™ºã«ãŠã„ã¦ã€ä¸€è²«ã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«å¿…è¦ãªè¦ç´„ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ¯ ç›®çš„
- **ä¸€è²«æ€§**: ãƒãƒ¼ãƒ å…¨ä½“ã§ã®çµ±ä¸€ã•ã‚ŒãŸé–‹ç™ºã‚¹ã‚¿ã‚¤ãƒ«
- **å“è³ª**: é«˜å“è³ªãªã‚³ãƒ¼ãƒ‰ã¨è¨­è¨ˆã®ç¶­æŒ
- **ä¿å®ˆæ€§**: é•·æœŸçš„ãªä¿å®ˆæ€§ã¨ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®ç¢ºä¿
- **åŠ¹ç‡æ€§**: é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Šã¨å­¦ç¿’ã‚³ã‚¹ãƒˆã®å‰Šæ¸›

## ğŸ“ è¦ç´„ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### ğŸŒŸ [`main_rules.yaml`](./main_rules.yaml) - ãƒ¡ã‚¤ãƒ³è¦ç´„
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã«é©ç”¨ã•ã‚Œã‚‹åŸºæœ¬è¦ç´„**
- æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è¦ç´„
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ è¦ç´„
- å‘½åè¦ç´„
- ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- APIè¨­è¨ˆè¦ç´„
- è¨­å®šç®¡ç†è¦ç´„
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¦ç´„
- ãƒ†ã‚¹ãƒˆè¦ç´„
- Gité‹ç”¨è¦ç´„
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ç´„
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ç´„

### ğŸ [`backend_rules.yaml`](./backend_rules.yaml) - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¦ç´„
**Python/Flask ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™ºã«ç‰¹åŒ–ã—ãŸè¦ç´„**
- Python ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ è¦ç´„
- ã‚¯ãƒ©ã‚¹è¨­è¨ˆè¦ç´„
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¦ç´„
- è¨­å®šç®¡ç†è¦ç´„
- APIè¨­è¨ˆè¦ç´„
- ãƒ†ã‚¹ãƒˆè¦ç´„
- ä¾å­˜é–¢ä¿‚ç®¡ç†
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ç´„
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ç´„

### âš›ï¸ [`frontend_rules.yaml`](./frontend_rules.yaml) - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¦ç´„
**React/TypeScript ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã«ç‰¹åŒ–ã—ãŸè¦ç´„**
- TypeScript ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¦ç´„
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ è¦ç´„
- Stateç®¡ç†è¦ç´„
- UI/UX ãƒ‡ã‚¶ã‚¤ãƒ³è¦ç´„
- APIé€šä¿¡è¦ç´„
- ãƒ†ã‚¹ãƒˆè¦ç´„
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ç´„
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¦ç´„
- é–‹ç™ºç’°å¢ƒè¦ç´„
- å‹å®šç¾©è¦ç´„

### ğŸ¤– [`ai_ml_rules.yaml`](./ai_ml_rules.yaml) - AI/MLè¦ç´„
**AI/MLæ©Ÿèƒ½ï¼ˆYOLOã€MediaPipeç­‰ï¼‰ã«ç‰¹åŒ–ã—ãŸè¦ç´„**
- AI/ML ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¦ç´„
- ç‰©ä½“æ¤œå‡ºï¼ˆYOLOï¼‰è¦ç´„
- å§¿å‹¢æ¤œå‡ºï¼ˆMediaPipeï¼‰è¦ç´„
- ç”»åƒå‡¦ç†è¦ç´„
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–è¦ç´„
- è¨­å®šç®¡ç†è¦ç´„
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¦ç´„
- ãƒ†ã‚¹ãƒˆè¦ç´„
- ãƒ¢ãƒ‡ãƒ«ç®¡ç†è¦ç´„
- å“è³ªä¿è¨¼è¦ç´„

## ğŸ” è¦ç´„ã®ä½¿ç”¨æ–¹æ³•

### æ–°æ©Ÿèƒ½é–‹ç™ºæ™‚
1. **`main_rules.yaml`** ã§å…¨ä½“çš„ãªæ–¹é‡ã‚’ç¢ºèª
2. è©²å½“ã™ã‚‹é ˜åŸŸã®è©³ç´°è¦ç´„ï¼ˆbackend/frontend/ai_mlï¼‰ã‚’å‚ç…§
3. å‘½åè¦ç´„ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã«å¾“ã£ã¦å®Ÿè£…
4. ãƒ†ã‚¹ãƒˆè¦ç´„ã«å¾“ã£ã¦ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ

### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚
- å„è¦ç´„ãƒ•ã‚¡ã‚¤ãƒ«ã®è©²å½“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼
- è¦ç´„é•åãŒã‚ã‚‹å ´åˆã¯å…·ä½“çš„ãªè¦ç´„é …ç›®ã‚’æŒ‡æ‘˜
- æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå¿…è¦ãªå ´åˆã¯è¦ç´„ã®æ›´æ–°ã‚’æ¤œè¨

### æ–°ãƒ¡ãƒ³ãƒãƒ¼å‚åŠ æ™‚
1. **`main_rules.yaml`** ã‚’æœ€åˆã«èª­ã‚“ã§å…¨ä½“åƒã‚’æŠŠæ¡
2. æ‹…å½“ã™ã‚‹é ˜åŸŸã®è©³ç´°è¦ç´„ã‚’ç†Ÿèª­
3. æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‚’è¦ç´„ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã¦ç†è§£ã‚’æ·±ã‚ã‚‹

## âš™ï¸ è¦ç´„ã®æ›´æ–°

### æ›´æ–°ãƒ—ãƒ­ã‚»ã‚¹
1. **èª²é¡Œã®ç‰¹å®š**: ç¾åœ¨ã®è¦ç´„ã§å¯¾å¿œã§ããªã„å•é¡Œã‚’ç‰¹å®š
2. **ææ¡ˆä½œæˆ**: è¦ç´„ã®è¿½åŠ ãƒ»ä¿®æ­£ææ¡ˆã‚’ä½œæˆ
3. **ãƒãƒ¼ãƒ è¨è­°**: ææ¡ˆã«ã¤ã„ã¦è­°è«–ã—åˆæ„å½¢æˆ
4. **è¦ç´„æ›´æ–°**: è©²å½“ã™ã‚‹YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°
5. **å‘¨çŸ¥å¾¹åº•**: å¤‰æ›´å†…å®¹ã‚’ãƒãƒ¼ãƒ å…¨ä½“ã«å‘¨çŸ¥

### æ›´æ–°æ™‚ã®æ³¨æ„ç‚¹
- æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®äº’æ›æ€§ã‚’è€ƒæ…®
- æ®µéšçš„ãªç§»è¡Œè¨ˆç”»ã‚’ç­–å®š
- å½±éŸ¿ç¯„å›²ã‚’æ˜ç¢ºã«ã—ã¦æ–‡æ›¸åŒ–

## ğŸ“Š è¦ç´„éµå®ˆã®ç¢ºèª

### è‡ªå‹•ãƒã‚§ãƒƒã‚¯
- **Backend**: Black, Flake8, mypy ã«ã‚ˆã‚‹è‡ªå‹•ãƒã‚§ãƒƒã‚¯
- **Frontend**: ESLint, Prettier ã«ã‚ˆã‚‹è‡ªå‹•ãƒã‚§ãƒƒã‚¯
- **CI/CD**: GitHub Actions ã§ã®è‡ªå‹•æ¤œè¨¼

### æ‰‹å‹•ç¢ºèª
- ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã®è¦ç´„éµå®ˆç¢ºèª
- å®šæœŸçš„ãªè¦ç´„éµå®ˆçŠ¶æ³ã®æ£šå¸ã—
- æ–°æ©Ÿèƒ½ãƒªãƒªãƒ¼ã‚¹å‰ã®è¦ç´„ãƒã‚§ãƒƒã‚¯

## ğŸ¨ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ä¾‹

### Python (Backend)
```python
# âœ… Good - è¦ç´„ã«æº–æ‹ 
from typing import Dict, Any
import numpy as np

class Detector:
    def __init__(self, config_manager=None):
        """ç‰©ä½“æ¤œå‡ºå™¨ã®åˆæœŸåŒ–
        
        Args:
            config_manager: è¨­å®šç®¡ç†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
        """
        self.config_manager = config_manager
        
    def detect_objects(self, frame: np.ndarray) -> Dict[str, Any]:
        """ç‰©ä½“æ¤œå‡ºã‚’å®Ÿè¡Œ"""
        if frame is None or frame.size == 0:
            logger.warning("Invalid frame received")
            return {}
            
        try:
            # æ¤œå‡ºå‡¦ç†
            return self._process_detection(frame)
        except Exception as e:
            logger.error(f"Detection failed: {e}", exc_info=True)
            return {}
```

### TypeScript (Frontend)
```typescript
// âœ… Good - è¦ç´„ã«æº–æ‹ 
interface MonitorViewProps {
  isFullscreen?: boolean;
  onToggleFullscreen: () => void;
}

export const MonitorView: React.FC<MonitorViewProps> = ({
  isFullscreen = false,
  onToggleFullscreen
}) => {
  const [status, setStatus] = useState<DetectionStatus>({
    personDetected: false,
    smartphoneDetected: false,
    absenceTime: 0,
    smartphoneUseTime: 0
  });

  const handleFullscreenToggle = useCallback(async () => {
    try {
      if (!document.fullscreenElement) {
        await containerRef.current?.requestFullscreen();
      } else {
        await document.exitFullscreen();
      }
    } catch (error) {
      console.error('Fullscreen toggle failed:', error);
    }
  }, []);

  return (
    <Box position="relative" width="100%" height="100vh" bg="black">
      {/* Component content */}
    </Box>
  );
};
```

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ README](../README.md)
- [æŠ€è¡“ä»•æ§˜æ›¸](../docs/) â€»å°†æ¥å®Ÿè£…
- [APIä»•æ§˜æ›¸](../docs/api/) â€»å°†æ¥å®Ÿè£…

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
ã“ã‚Œã‚‰ã®è¦ç´„ã¯ KanshiChan ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸€éƒ¨ã¨ã—ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åŒã˜ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼ˆMITï¼‰ã®ä¸‹ã§æä¾›ã•ã‚Œã¾ã™ã€‚ 