= âš™ï¸ ç›£è¦–ã¡ã‚ƒã‚“(KanshiChan) è¨­å®šã‚¬ã‚¤ãƒ‰
:toc: left
:toc-title: ç›®æ¬¡
:toclevels: 4
:numbered:
:source-highlighter: highlight.js
:icons: font
:doctype: book
:version: 2.0.0
:author: KanshiChan Development Team
:email: team@kanshichan.dev
:revnumber: 2.0
:revdate: {docdate}
:experimental:

== ğŸ“– æ¦‚è¦

ç›£è¦–ã¡ã‚ƒã‚“ï¼ˆKanshiChanï¼‰ã®ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã«é–¢ã™ã‚‹åŒ…æ‹¬çš„ãªã‚¬ã‚¤ãƒ‰ã§ã™ã€‚
ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€config.yamlã®è©³ç´°è¨­å®šã€ç’°å¢ƒåˆ¥æœ€é©åŒ–ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

[NOTE]
====
ğŸ“‹ **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæƒ…å ±**

* **å¯¾è±¡èª­è€…**: ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€DevOpsã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
* **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: Python 3.9+ / Flask 2.3+ / YAMLè¨­å®š
* **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.0.0 (AIæœ€é©åŒ–ãƒ»å›½éš›åŒ–å¯¾å¿œãƒ»TTSçµ±åˆç‰ˆ)
* **æœ€çµ‚æ›´æ–°**: {docdate}
====

== ğŸ¯ è¨­å®šã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

=== ğŸ’¡ è¨­å®šç®¡ç†åŸå‰‡

==== è¨­è¨ˆæ€æƒ³
* **éšå±¤è¨­å®š**: è¨­å®šã®å„ªå…ˆé †ä½ã¨ç¶™æ‰¿
* **ç’°å¢ƒåˆ†é›¢**: é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆãƒ»æœ¬ç•ªç’°å¢ƒã®åˆ†é›¢
* **å‹•çš„æ›´æ–°**: ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œ
* **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: è¨­å®šå€¤ã®è‡ªå‹•æ¤œè¨¼
* **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: æ©Ÿå¯†æƒ…å ±ã®å®‰å…¨ãªç®¡ç†

==== è¨­å®šã‚½ãƒ¼ã‚¹å„ªå…ˆé †ä½
[cols="1,3,2", options="header"]
|===
|å„ªå…ˆé †ä½ |è¨­å®šã‚½ãƒ¼ã‚¹ |ç”¨é€”
|**1 (æœ€é«˜)** |ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•° |å®Ÿè¡Œæ™‚ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰
|**2** |ç’°å¢ƒå¤‰æ•° |ç’°å¢ƒå›ºæœ‰è¨­å®š
|**3** |config.yaml |ãƒ¡ã‚¤ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
|**4 (æœ€ä½)** |ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ |ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤
|===

=== ğŸ—ï¸ è¨­å®šã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

[mermaid]
....
graph TB
    subgraph "ğŸ“¥ Configuration Sources"
        CLI[Command Line<br/>å¼•æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰]
        ENV[Environment Variables<br/>ç’°å¢ƒå›ºæœ‰è¨­å®š]
        YAML[config.yaml<br/>ãƒ¡ã‚¤ãƒ³è¨­å®š]
        DEFAULT[Default Values<br/>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤]
    end
    
    subgraph "ğŸ”§ ConfigManager"
        LOADER[Config Loader<br/>è¨­å®šèª­ã¿è¾¼ã¿]
        MERGER[Config Merger<br/>è¨­å®šãƒãƒ¼ã‚¸]
        VALIDATOR[Validator<br/>è¨­å®šæ¤œè¨¼]
        CACHE[Config Cache<br/>è¨­å®šã‚­ãƒ£ãƒƒã‚·ãƒ¥]
    end
    
    subgraph "ğŸ¯ Configuration Categories"
        SYSTEM[System Config<br/>ã‚·ã‚¹ãƒ†ãƒ åŸºæœ¬è¨­å®š]
        AI[AI/ML Config<br/>AIãƒ»æ©Ÿæ¢°å­¦ç¿’è¨­å®š]
        ALERT[Alert Config<br/>ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»é€šçŸ¥è¨­å®š]
        PERF[Performance Config<br/>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®š]
        SECURITY[Security Config<br/>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š]
    end
    
    subgraph "ğŸ”„ Runtime Management"
        HOT[Hot Reload<br/>å‹•çš„æ›´æ–°]
        MONITOR[Config Monitor<br/>å¤‰æ›´ç›£è¦–]
        BACKUP[Config Backup<br/>è¨­å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—]
        RESTORE[Config Restore<br/>è¨­å®šå¾©å…ƒ]
    end
    
    %% ãƒ•ãƒ­ãƒ¼
    CLI --> LOADER
    ENV --> LOADER
    YAML --> LOADER
    DEFAULT --> LOADER
    
    LOADER --> MERGER
    MERGER --> VALIDATOR
    VALIDATOR --> CACHE
    
    CACHE --> SYSTEM
    CACHE --> AI
    CACHE --> ALERT
    CACHE --> PERF
    CACHE --> SECURITY
    
    CACHE --> HOT
    HOT --> MONITOR
    MONITOR --> BACKUP
    BACKUP --> RESTORE
    
    %% ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
    classDef sources fill:#e6f3ff,stroke:#4488ff
    classDef manager fill:#fff3e6,stroke:#ff8844
    classDef categories fill:#f3ffe6,stroke:#44aa44
    classDef runtime fill:#ffe6f3,stroke:#ff44aa
    
    class CLI,ENV,YAML,DEFAULT sources
    class LOADER,MERGER,VALIDATOR,CACHE manager
    class SYSTEM,AI,ALERT,PERF,SECURITY categories
    class HOT,MONITOR,BACKUP,RESTORE runtime
....

== ğŸ“‹ config.yaml å®Œå…¨ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

=== ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ åŸºæœ¬è¨­å®š

==== ã‚µãƒ¼ãƒãƒ¼è¨­å®š
```yaml
# ã‚µãƒ¼ãƒãƒ¼ãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŸºæœ¬è¨­å®š
server:
  # ãƒã‚¤ãƒ³ãƒ‰ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆæœ¬ç•ªç’°å¢ƒã§ã¯è¦å¤‰æ›´ï¼‰
  host: "0.0.0.0"
  
  # ãƒãƒ¼ãƒˆç•ªå·
  port: 8000
  
  # ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ï¼ˆæœ¬ç•ªç’°å¢ƒã§ã¯ false å¿…é ˆï¼‰
  debug: false
  
  # ã‚¹ãƒ¬ãƒƒãƒ‰æ•°
  threaded: true
  
  # CORSè¨­å®š
  cors:
    enabled: true
    origins: 
      - "http://localhost:3000"      # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºç’°å¢ƒ
      - "http://127.0.0.1:3000"      # ãƒ­ãƒ¼ã‚«ãƒ«ã‚¢ã‚¯ã‚»ã‚¹
    allow_credentials: true
    
  # SSL/TLSè¨­å®š
  ssl:
    enabled: false
    cert_file: ""
    key_file: ""
```

==== ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
```yaml
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨èˆ¬è¨­å®š
app:
  # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å
  name: "KanshiChan"
  
  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³
  version: "2.0.0"
  
  # è¨€èªè¨­å®š
  language:
    default: "ja"                    # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èª
    supported: ["ja", "en"]          # ã‚µãƒãƒ¼ãƒˆè¨€èª
    
  # ãƒ­ã‚°è¨­å®š
  logging:
    level: "INFO"                    # ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«: DEBUG/INFO/WARNING/ERROR/CRITICAL
    format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
    file_path: "logs/kanshichan.log"
    max_size_mb: 100                 # ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«æœ€å¤§ã‚µã‚¤ã‚º
    backup_count: 5                  # ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ä¿æŒæ•°
    
  # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
  database:
    url: "sqlite:///data/kanshichan.db"
    echo: false                      # SQLãƒ­ã‚°å‡ºåŠ›
    pool_size: 10
    max_overflow: 20
    pool_timeout: 30
    pool_recycle: 3600              # æ¥ç¶šãƒªã‚µã‚¤ã‚¯ãƒ«æ™‚é–“ï¼ˆç§’ï¼‰
```

=== ğŸ¤– AIãƒ»æ©Ÿæ¢°å­¦ç¿’è¨­å®š

==== YOLOç‰©ä½“æ¤œå‡ºè¨­å®š
```yaml
# YOLO v8 ç‰©ä½“æ¤œå‡ºè¨­å®š
yolo:
  # åŸºæœ¬è¨­å®š
  enabled: true
  model_path: "yolov8n.pt"           # ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
  
  # æ¤œå‡ºãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
  detection:
    confidence_threshold: 0.5        # ä¿¡é ¼åº¦é–¾å€¤
    iou_threshold: 0.7              # IoUé–¾å€¤ï¼ˆNMSï¼‰
    max_detections: 10              # æœ€å¤§æ¤œå‡ºæ•°
    classes:                        # æ¤œå‡ºå¯¾è±¡ã‚¯ãƒ©ã‚¹
      - 0                           # person
      - 67                          # cell phone
    
  # ãƒ‡ãƒã‚¤ã‚¹è¨­å®š
  device:
    auto_select: true               # è‡ªå‹•ãƒ‡ãƒã‚¤ã‚¹é¸æŠ
    preferred: "auto"               # auto/cpu/cuda/mps
    fallback_to_cpu: true           # GPUå¤±æ•—æ™‚CPUä½¿ç”¨
    
  # æœ€é©åŒ–è¨­å®š
  optimization:
    half_precision: false           # åŠç²¾åº¦è¨ˆç®—ï¼ˆCPUç„¡åŠ¹ï¼‰
    tensorrt: false                 # TensorRTæœ€é©åŒ–
    dynamic_shapes: true            # å‹•çš„å½¢çŠ¶å¯¾å¿œ
    
  # ãƒãƒƒãƒå‡¦ç†
  batch:
    enabled: false                  # ãƒãƒƒãƒå‡¦ç†æœ‰åŠ¹
    size: 1                         # ãƒãƒƒãƒã‚µã‚¤ã‚º
    timeout_ms: 100                 # ãƒãƒƒãƒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
```

==== MediaPipeå§¿å‹¢æ¤œå‡ºè¨­å®š
```yaml
# MediaPipe å§¿å‹¢ãƒ»æ‰‹ãƒ»é¡”æ¤œå‡ºè¨­å®š
mediapipe:
  # å…¨èˆ¬è¨­å®š
  enabled: true
  
  # å§¿å‹¢æ¤œå‡º
  pose:
    enabled: true
    model_complexity: 0             # 0:è»½é‡ 1:ä¸­ 2:é«˜ç²¾åº¦
    min_detection_confidence: 0.7   # æ¤œå‡ºä¿¡é ¼åº¦é–¾å€¤
    min_tracking_confidence: 0.7    # è¿½è·¡ä¿¡é ¼åº¦é–¾å€¤
    smooth_landmarks: true          # ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯å¹³æ»‘åŒ–
    enable_segmentation: false      # ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
    
  # æ‰‹æ¤œå‡º
  hands:
    enabled: false
    max_num_hands: 2                # æœ€å¤§æ¤œå‡ºæ‰‹æ•°
    min_detection_confidence: 0.5
    min_tracking_confidence: 0.5
    
  # é¡”æ¤œå‡º
  face:
    enabled: false
    max_num_faces: 1                # æœ€å¤§æ¤œå‡ºé¡”æ•°
    refine_landmarks: true          # ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯è©³ç´°åŒ–
    min_detection_confidence: 0.5
    min_tracking_confidence: 0.5
```

==== AIæœ€é©åŒ–è¨­å®š
```yaml
# AIå‡¦ç†æœ€é©åŒ–è¨­å®š
ai_optimization:
  # å…¨èˆ¬è¨­å®š
  enabled: true
  target_fps: 15.0                  # ç›®æ¨™FPS
  min_fps: 10.0                     # æœ€ä½FPS
  max_fps: 30.0                     # æœ€å¤§FPS
  
  # ãƒ•ãƒ¬ãƒ¼ãƒ æœ€é©åŒ–
  frame_optimization:
    auto_resize: true               # è‡ªå‹•ãƒªã‚µã‚¤ã‚º
    max_width: 640                  # æœ€å¤§å¹…
    max_height: 480                 # æœ€å¤§é«˜ã•
    quality_vs_speed: 0.7           # å“è³ªvsé€Ÿåº¦ãƒãƒ©ãƒ³ã‚¹ï¼ˆ0:é€Ÿåº¦é‡è¦– 1:å“è³ªé‡è¦–ï¼‰
    
  # ãƒ•ãƒ¬ãƒ¼ãƒ ã‚¹ã‚­ãƒƒãƒ—
  frame_skip:
    enabled: true                   # ãƒ•ãƒ¬ãƒ¼ãƒ ã‚¹ã‚­ãƒƒãƒ—æœ‰åŠ¹
    max_skip: 3                     # æœ€å¤§ã‚¹ã‚­ãƒƒãƒ—ãƒ•ãƒ¬ãƒ¼ãƒ æ•°
    performance_threshold: 0.8      # æ€§èƒ½é–¾å€¤
    
  # GPUè¨­å®š
  gpu:
    memory_limit: 0.8               # GPU ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ä¸Šé™
    allow_growth: true              # ãƒ¡ãƒ¢ãƒªå‹•çš„ç¢ºä¿
    mixed_precision: false          # æ··åˆç²¾åº¦è¨ˆç®—
    
  # ãƒ¡ãƒ¢ãƒªç®¡ç†
  memory:
    cache_size_mb: 512              # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚º
    gc_interval: 300                # GCå®Ÿè¡Œé–“éš”ï¼ˆç§’ï¼‰
    force_gc_memory_threshold: 0.9  # å¼·åˆ¶GCé–¾å€¤
```

=== ğŸ“¹ ã‚«ãƒ¡ãƒ©ãƒ»æ˜ åƒè¨­å®š

```yaml
# ã‚«ãƒ¡ãƒ©ãƒ»æ˜ åƒå‡¦ç†è¨­å®š
camera:
  # ã‚«ãƒ¡ãƒ©ãƒ‡ãƒã‚¤ã‚¹
  device:
    index: 0                        # ã‚«ãƒ¡ãƒ©ãƒ‡ãƒã‚¤ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
    width: 640                      # ã‚­ãƒ£ãƒ—ãƒãƒ£å¹…
    height: 480                     # ã‚­ãƒ£ãƒ—ãƒãƒ£é«˜ã•
    fps: 30                         # ã‚­ãƒ£ãƒ—ãƒãƒ£FPS
    
  # æ˜ åƒå“è³ª
  quality:
    brightness: 0                   # æ˜åº¦èª¿æ•´ (-100 to 100)
    contrast: 0                     # ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆèª¿æ•´ (-100 to 100)
    saturation: 0                   # å½©åº¦èª¿æ•´ (-100 to 100)
    auto_exposure: true             # è‡ªå‹•éœ²å‡º
    
  # å‰å‡¦ç†
  preprocessing:
    flip_horizontal: false          # æ°´å¹³åè»¢
    flip_vertical: false            # å‚ç›´åè»¢
    rotation: 0                     # å›è»¢è§’åº¦ï¼ˆåº¦ï¼‰
    crop:                           # ã‚¯ãƒ­ãƒƒãƒ—è¨­å®š
      enabled: false
      x: 0
      y: 0
      width: 640
      height: 480
      
# ãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†è¨­å®š
frame_processing:
  # ãƒãƒƒãƒ•ã‚¡è¨­å®š
  buffer:
    size: 10                        # ãƒ•ãƒ¬ãƒ¼ãƒ ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º
    drop_on_full: true              # ãƒãƒƒãƒ•ã‚¡æº€æ¯æ™‚ãƒ•ãƒ¬ãƒ¼ãƒ ç ´æ£„
    
  # ãƒ•ã‚£ãƒ«ã‚¿è¨­å®š
  filters:
    noise_reduction: false          # ãƒã‚¤ã‚ºé™¤å»
    blur_reduction: false           # ãƒ–ãƒ©ãƒ¼è»½æ¸›
    histogram_equalization: false   # ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ å‡ç­‰åŒ–
```

=== ğŸ”” ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»é€šçŸ¥è¨­å®š

```yaml
# ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
alerts:
  # å…¨èˆ¬è¨­å®š
  enabled: true
  
  # ã‚¢ãƒ©ãƒ¼ãƒˆç¨®åˆ¥è¨­å®š
  types:
    absence:                        # é›¢å¸­ã‚¢ãƒ©ãƒ¼ãƒˆ
      enabled: true
      threshold_seconds: 300        # é–¾å€¤ï¼ˆç§’ï¼‰
      repeat_interval: 600          # ç¹°ã‚Šè¿”ã—é–“éš”ï¼ˆç§’ï¼‰
      max_repeats: 3                # æœ€å¤§ç¹°ã‚Šè¿”ã—å›æ•°
      
    smartphone:                     # ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³æ¤œå‡ºã‚¢ãƒ©ãƒ¼ãƒˆ
      enabled: true
      threshold_seconds: 10         # é–¾å€¤ï¼ˆç§’ï¼‰
      repeat_interval: 300          # ç¹°ã‚Šè¿”ã—é–“éš”ï¼ˆç§’ï¼‰
      max_repeats: 5                # æœ€å¤§ç¹°ã‚Šè¿”ã—å›æ•°
      
    posture:                        # å§¿å‹¢ã‚¢ãƒ©ãƒ¼ãƒˆ
      enabled: true
      threshold_score: 0.3          # å§¿å‹¢ã‚¹ã‚³ã‚¢é–¾å€¤
      threshold_duration: 120       # ç¶™ç¶šæ™‚é–“é–¾å€¤ï¼ˆç§’ï¼‰
      repeat_interval: 900          # ç¹°ã‚Šè¿”ã—é–“éš”ï¼ˆç§’ï¼‰
      
  # é€šçŸ¥æ–¹æ³•è¨­å®š
  notifications:
    sound:                          # éŸ³å£°é€šçŸ¥
      enabled: true
      volume: 0.8                   # éŸ³é‡ï¼ˆ0.0-1.0ï¼‰
      
    tts:                            # TTSéŸ³å£°é€šçŸ¥
      enabled: true
      voice_id: "default"
      emotion: "neutral"
      
    line:                           # LINEé€šçŸ¥
      enabled: false
      token: ""                     # LINE Notify ãƒˆãƒ¼ã‚¯ãƒ³
      
  # æŠ‘åˆ¶è¨­å®š
  suppression:
    quiet_hours:                    # é™éŸ³æ™‚é–“
      enabled: false
      start_time: "22:00"
      end_time: "08:00"
      
    do_not_disturb:                 # é‚ªé­”ã—ãªã„ãƒ¢ãƒ¼ãƒ‰
      enabled: false
      duration_minutes: 60
```

=== ğŸ”Š TTSéŸ³å£°åˆæˆè¨­å®š

```yaml
# TTSï¼ˆText-to-Speechï¼‰è¨­å®š
tts:
  # TTS ã‚¨ãƒ³ã‚¸ãƒ³è¨­å®š
  engine:
    type: "zonos"                   # ã‚¨ãƒ³ã‚¸ãƒ³ã‚¿ã‚¤ãƒ—: zonos/system
    model: "Zyphra/Zonos-v0.1-transformer"
    
  # éŸ³å£°è¨­å®š
  voice:
    default_voice_id: "default"
    speed: 1.0                      # è©±é€Ÿï¼ˆ0.5-2.0ï¼‰
    pitch: 1.0                      # ãƒ”ãƒƒãƒï¼ˆ0.5-2.0ï¼‰
    volume: 0.8                     # éŸ³é‡ï¼ˆ0.0-1.0ï¼‰
    
  # æ„Ÿæƒ…è¨­å®š
  emotion:
    default: "neutral"              # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ„Ÿæƒ…
    context_aware: true             # æ–‡è„ˆã«å¿œã˜ãŸæ„Ÿæƒ…èª¿æ•´
    
  # ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
  cache:
    enabled: true                   # éŸ³å£°ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    max_size_mb: 100                # æœ€å¤§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚º
    ttl_seconds: 86400              # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿æŒæ™‚é–“
    
  # ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®š
  files:
    output_format: "wav"            # å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: wav/mp3
    sample_rate: 22050              # ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆ
    bit_depth: 16                   # ãƒ“ãƒƒãƒˆæ·±åº¦
    
  # å¤šè¨€èªè¨­å®š
  languages:
    default: "ja"                   # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èª
    auto_detect: true               # è‡ªå‹•è¨€èªæ¤œå‡º
    fallback: "en"                  # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨€èª
```

=== ğŸ“Š ç›£è¦–ãƒ»åˆ†æè¨­å®š

```yaml
# ç›£è¦–ãƒ»åˆ†æã‚·ã‚¹ãƒ†ãƒ è¨­å®š
monitoring:
  # åŸºæœ¬ç›£è¦–è¨­å®š
  enabled: true
  interval_seconds: 2               # ç›£è¦–é–“éš”ï¼ˆç§’ï¼‰
  
  # ãƒ‡ãƒ¼ã‚¿åé›†è¨­å®š
  data_collection:
    enabled: true
    batch_size: 100                 # ãƒãƒƒãƒã‚µã‚¤ã‚º
    flush_interval_seconds: 30      # ãƒ•ãƒ©ãƒƒã‚·ãƒ¥é–“éš”
    
  # åˆ†æè¨­å®š
  analysis:
    realtime: true                  # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ†æ
    batch_interval_seconds: 3600    # ãƒãƒƒãƒåˆ†æé–“éš”
    
  # çµ±è¨ˆè¨­å®š
  statistics:
    window_size_minutes: 60         # çµ±è¨ˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚º
    history_retention_days: 30      # å±¥æ­´ä¿æŒæ—¥æ•°
    
# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–è¨­å®š
performance:
  # ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ç›£è¦–
  system:
    enabled: true
    cpu_threshold: 80               # CPUä½¿ç”¨ç‡é–¾å€¤ï¼ˆ%ï¼‰
    memory_threshold: 80            # ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡é–¾å€¤ï¼ˆ%ï¼‰
    disk_threshold: 90              # ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨ç‡é–¾å€¤ï¼ˆ%ï¼‰
    
  # AIå‡¦ç†æ€§èƒ½ç›£è¦–
  ai_performance:
    enabled: true
    fps_threshold: 10               # æœ€ä½FPSé–¾å€¤
    latency_threshold_ms: 200       # é…å»¶é–¾å€¤ï¼ˆãƒŸãƒªç§’ï¼‰
    accuracy_threshold: 0.8         # ç²¾åº¦é–¾å€¤
```

=== ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

```yaml
# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
security:
  # åŸºæœ¬ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
  enabled: true
  
  # ãƒ‡ãƒ¼ã‚¿ä¿è­·
  data_protection:
    encrypt_sensitive_data: true    # æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–
    anonymize_logs: true            # ãƒ­ã‚°åŒ¿ååŒ–
    data_retention_days: 90         # ãƒ‡ãƒ¼ã‚¿ä¿æŒæœŸé–“
    
  # ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
  access_control:
    require_authentication: false   # èªè¨¼è¦æ±‚ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã¯ç„¡åŠ¹ï¼‰
    allowed_origins:                # è¨±å¯ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒ³
      - "http://localhost:3000"
      - "http://127.0.0.1:3000"
      
  # ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·
  privacy:
    local_processing_only: true     # ãƒ­ãƒ¼ã‚«ãƒ«å‡¦ç†ã®ã¿
    no_cloud_storage: true          # ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¸ä½¿ç”¨
    gdpr_compliance: true           # GDPRæº–æ‹ 
    
  # ç›£æŸ»ãƒ­ã‚°
  audit:
    enabled: true
    log_level: "INFO"
    retention_days: 365             # ç›£æŸ»ãƒ­ã‚°ä¿æŒæœŸé–“
```

== ğŸŒ ç’°å¢ƒåˆ¥è¨­å®šæˆ¦ç•¥

=== ğŸ  é–‹ç™ºç’°å¢ƒè¨­å®š

==== development.yaml
```yaml
# é–‹ç™ºç’°å¢ƒå›ºæœ‰è¨­å®š
app:
  debug: true                       # ãƒ‡ãƒãƒƒã‚°æœ‰åŠ¹
  logging:
    level: "DEBUG"                  # è©³ç´°ãƒ­ã‚°

server:
  host: "127.0.0.1"                 # ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿
  port: 8000

yolo:
  device:
    preferred: "cpu"                # é–‹ç™ºç”¨CPUä½¿ç”¨

ai_optimization:
  target_fps: 10.0                  # ä½FPSï¼ˆé–‹ç™ºç”¨ï¼‰
  frame_optimization:
    quality_vs_speed: 0.3           # é€Ÿåº¦é‡è¦–

alerts:
  notifications:
    sound:
      volume: 0.3                   # ä½éŸ³é‡
```

=== ğŸ§ª ãƒ†ã‚¹ãƒˆç’°å¢ƒè¨­å®š

==== testing.yaml
```yaml
# ãƒ†ã‚¹ãƒˆç’°å¢ƒå›ºæœ‰è¨­å®š
app:
  debug: false
  logging:
    level: "WARNING"                # ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šã®ã¿

monitoring:
  enabled: false                    # ç›£è¦–ç„¡åŠ¹

alerts:
  enabled: false                    # ã‚¢ãƒ©ãƒ¼ãƒˆç„¡åŠ¹

tts:
  cache:
    enabled: false                  # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹
```

=== ğŸš€ æœ¬ç•ªç’°å¢ƒè¨­å®š

==== production.yaml
```yaml
# æœ¬ç•ªç’°å¢ƒå›ºæœ‰è¨­å®š
app:
  debug: false                      # ãƒ‡ãƒãƒƒã‚°ç„¡åŠ¹ï¼ˆå¿…é ˆï¼‰
  logging:
    level: "INFO"
    file_path: "/var/log/kanshichan/app.log"

server:
  host: "0.0.0.0"
  port: 8000
  ssl:
    enabled: true                   # SSLæœ‰åŠ¹
    cert_file: "/etc/ssl/certs/kanshichan.crt"
    key_file: "/etc/ssl/private/kanshichan.key"

yolo:
  device:
    preferred: "cuda"               # GPUå„ªå…ˆ

ai_optimization:
  target_fps: 15.0                  # æ¨™æº–FPS
  gpu:
    memory_limit: 0.9               # GPU ãƒ¡ãƒ¢ãƒªä¸Šé™é«˜ã‚

security:
  data_protection:
    encrypt_sensitive_data: true    # æš—å·åŒ–å¿…é ˆ
  audit:
    enabled: true                   # ç›£æŸ»ãƒ­ã‚°å¿…é ˆ

performance:
  system:
    enabled: true                   # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–å¿…é ˆ
```

== âš™ï¸ ç’°å¢ƒå¤‰æ•°ç®¡ç†

=== ğŸ“‹ ç’°å¢ƒå¤‰æ•°ä¸€è¦§

[cols="3,2,4", options="header"]
|===
|ç’°å¢ƒå¤‰æ•°å |ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ |èª¬æ˜
|**KANSHICHAN_CONFIG_PATH** |`config/config.yaml` |è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
|**KANSHICHAN_ENV** |`development` |å®Ÿè¡Œç’°å¢ƒ
|**KANSHICHAN_DEBUG** |`false` |ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
|**KANSHICHAN_LOG_LEVEL** |`INFO` |ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
|**KANSHICHAN_HOST** |`localhost` |ãƒã‚¤ãƒ³ãƒ‰ãƒ›ã‚¹ãƒˆ
|**KANSHICHAN_PORT** |`8000` |ãƒãƒ¼ãƒˆç•ªå·
|**KANSHICHAN_GPU_ENABLED** |`auto` |GPUä½¿ç”¨è¨­å®š
|**KANSHICHAN_YOLO_MODEL** |`yolov8n.pt` |YOLOãƒ¢ãƒ‡ãƒ«ãƒ‘ã‚¹
|**LINE_NOTIFY_TOKEN** |`""` |LINEé€šçŸ¥ãƒˆãƒ¼ã‚¯ãƒ³
|**TTS_CACHE_DIR** |`cache/tts` |TTSã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
|===

=== ğŸ”§ ç’°å¢ƒå¤‰æ•°è¨­å®šä¾‹

==== .env ãƒ•ã‚¡ã‚¤ãƒ«
```bash
# KanshiChan ç’°å¢ƒå¤‰æ•°è¨­å®š
KANSHICHAN_ENV=production
KANSHICHAN_DEBUG=false
KANSHICHAN_LOG_LEVEL=INFO
KANSHICHAN_HOST=0.0.0.0
KANSHICHAN_PORT=8000

# GPUè¨­å®š
KANSHICHAN_GPU_ENABLED=true

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
KANSHICHAN_SECRET_KEY=your-secret-key-here

# å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹
LINE_NOTIFY_TOKEN=your-line-token-here

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
KANSHICHAN_MAX_WORKERS=4
KANSHICHAN_WORKER_TIMEOUT=30
```

==== Dockerç’°å¢ƒå¤‰æ•°
```dockerfile
# Dockerfileå†…ã§ã®ç’°å¢ƒå¤‰æ•°è¨­å®š
ENV KANSHICHAN_ENV=production
ENV KANSHICHAN_CONFIG_PATH=/app/config/production.yaml
ENV KANSHICHAN_LOG_LEVEL=INFO
ENV KANSHICHAN_GPU_ENABLED=auto
```

== ğŸ”§ è¨­å®šå¤‰æ›´ãƒ»ç®¡ç†æ‰‹é †

=== ğŸ“ è¨­å®šå¤‰æ›´ã®åŸºæœ¬æ‰‹é †

[mermaid]
....
graph TD
    START[è¨­å®šå¤‰æ›´é–‹å§‹] --> BACKUP[ç¾åœ¨ã®è¨­å®šã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—]
    BACKUP --> EDIT[è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†]
    EDIT --> VALIDATE[è¨­å®šå€¤æ¤œè¨¼]
    VALIDATE --> TEST[ãƒ†ã‚¹ãƒˆç’°å¢ƒã§å‹•ä½œç¢ºèª]
    TEST --> DEPLOY[æœ¬ç•ªç’°å¢ƒã¸ã®é©ç”¨]
    DEPLOY --> MONITOR[å‹•ä½œç›£è¦–]
    MONITOR --> END[è¨­å®šå¤‰æ›´å®Œäº†]
    
    VALIDATE -->|æ¤œè¨¼ã‚¨ãƒ©ãƒ¼| FIX[è¨­å®šå€¤ä¿®æ­£]
    FIX --> VALIDATE
    
    TEST -->|ãƒ†ã‚¹ãƒˆå¤±æ•—| ROLLBACK[è¨­å®šãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯]
    ROLLBACK --> BACKUP
    
    DEPLOY -->|é©ç”¨å¤±æ•—| EMERGENCY[ç·Šæ€¥ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯]
    EMERGENCY --> BACKUP
    
    classDef normal fill:#e6f3ff
    classDef error fill:#ffe6e6
    classDef success fill:#e6ffe6
    
    class START,BACKUP,EDIT,VALIDATE,TEST,DEPLOY,MONITOR,END normal
    class FIX,ROLLBACK,EMERGENCY error
....

=== ğŸ”„ ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

==== è¨­å®šãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œé …ç›®
[cols="3,2,3", options="header"]
|===
|è¨­å®šã‚«ãƒ†ã‚´ãƒª |ãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œ |æ³¨æ„äº‹é …
|**ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«** |âœ… |å³åº§ã«åæ˜ 
|**ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š** |âœ… |å³åº§ã«åæ˜ 
|**AIæœ€é©åŒ–è¨­å®š** |âœ… |æ¬¡ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰åæ˜ 
|**TTSè¨­å®š** |âœ… |æ¬¡å›åˆæˆæ™‚ã‹ã‚‰åæ˜ 
|**ã‚µãƒ¼ãƒãƒ¼è¨­å®š** |âŒ |å†èµ·å‹•å¿…è¦
|**AI ãƒ¢ãƒ‡ãƒ«è¨­å®š** |âŒ |å†èµ·å‹•å¿…è¦
|**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š** |âŒ |å†èµ·å‹•å¿…è¦
|===

==== ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å®Ÿè¡Œæ–¹æ³•
```bash
# è¨­å®šãƒªãƒ­ãƒ¼ãƒ‰ APIçµŒç”±
curl -X POST http://localhost:8000/api/config/reload

# ã‚·ã‚°ãƒŠãƒ«çµŒç”±ï¼ˆUNIXç³»ï¼‰
kill -USR1 <pid>

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ï¼ˆè‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰ï¼‰
# FileSystemWatcher ãŒå¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦è‡ªå‹•å®Ÿè¡Œ
```

=== ğŸ’¾ è¨­å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ

==== è¨­å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```bash
# æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
python -m kanshichan.tools.config backup --output config_backup_20240115.yaml

# è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆå¤‰æ›´å‰ï¼‰
# ConfigManager ãŒè‡ªå‹•çš„ã«å®Ÿè¡Œ
```

==== è¨­å®šå¾©å…ƒ
```bash
# ç‰¹å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
python -m kanshichan.tools.config restore --input config_backup_20240115.yaml

# å‰å›è¨­å®šã«æˆ»ã™
python -m kanshichan.tools.config rollback
```

== âœ… è¨­å®šå€¤æ¤œè¨¼ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

=== ğŸ” è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

==== ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«
[cols="2,3,3", options="header"]
|===
|è¨­å®šé …ç›® |ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ« |ã‚¨ãƒ©ãƒ¼æ™‚ã®å‹•ä½œ
|**FPSè¨­å®š** |1.0 â‰¤ fps â‰¤ 60.0 |ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ä½¿ç”¨
|**ãƒãƒ¼ãƒˆç•ªå·** |1024 â‰¤ port â‰¤ 65535 |ã‚¨ãƒ©ãƒ¼çµ‚äº†
|**ãƒ¡ãƒ¢ãƒªåˆ¶é™** |0.1 â‰¤ memory_limit â‰¤ 1.0 |ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ä½¿ç”¨
|**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹** |ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª |è­¦å‘Šãƒ­ã‚°å‡ºåŠ›
|**URLå½¢å¼** |URLå½¢å¼ãƒã‚§ãƒƒã‚¯ |ã‚¨ãƒ©ãƒ¼çµ‚äº†
|===

==== ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
```python
# config/validators.py
from dataclasses import dataclass
from typing import Any, List

@dataclass
class ValidationResult:
    is_valid: bool
    errors: List[str]
    warnings: List[str]

class ConfigValidator:
    def validate_ai_settings(self, config: dict) -> ValidationResult:
        """AIè¨­å®šã®ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³"""
        errors = []
        warnings = []
        
        # YOLOè¨­å®šãƒã‚§ãƒƒã‚¯
        if config.get('yolo', {}).get('enabled', False):
            model_path = config['yolo'].get('model_path')
            if not os.path.exists(model_path):
                errors.append(f"YOLO model not found: {model_path}")
        
        # GPUè¨­å®šãƒã‚§ãƒƒã‚¯
        if config.get('yolo', {}).get('device', {}).get('preferred') == 'cuda':
            if not torch.cuda.is_available():
                warnings.append("CUDA not available, falling back to CPU")
        
        return ValidationResult(
            is_valid=len(errors) == 0,
            errors=errors,
            warnings=warnings
        )
```

=== ğŸ§ª è¨­å®šãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

==== è¨­å®šãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼
python -m kanshichan.tools.config validate --config config/production.yaml

# è¨­å®šãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python -m kanshichan.tools.config test --config config/production.yaml --dry-run

# è¨­å®šå·®åˆ†ç¢ºèª
python -m kanshichan.tools.config diff --old config/config.yaml.bak --new config/config.yaml
```

==== ãƒ†ã‚¹ãƒˆé …ç›®
* **æ§‹æ–‡ãƒã‚§ãƒƒã‚¯**: YAMLæ§‹æ–‡ã®æ­£ç¢ºæ€§
* **å¿…é ˆé …ç›®**: å¿…é ˆè¨­å®šé …ç›®ã®å­˜åœ¨ç¢ºèª
* **ãƒ‡ãƒ¼ã‚¿å‹**: è¨­å®šå€¤ã®ãƒ‡ãƒ¼ã‚¿å‹ãƒã‚§ãƒƒã‚¯
* **ç¯„å›²ãƒã‚§ãƒƒã‚¯**: æ•°å€¤ã®æœ‰åŠ¹ç¯„å›²ç¢ºèª
* **ä¾å­˜é–¢ä¿‚**: è¨­å®šé–“ã®ä¾å­˜é–¢ä¿‚ç¢ºèª
* **å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å­˜åœ¨ç¢ºèª

== ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

=== âš¡ åŸºæœ¬ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

==== ä½æ€§èƒ½ç’°å¢ƒå‘ã‘è¨­å®š
```yaml
# ä½æ€§èƒ½ç’°å¢ƒæœ€é©åŒ–è¨­å®š
ai_optimization:
  target_fps: 8.0                   # ä½FPS
  frame_optimization:
    auto_resize: true
    max_width: 320                  # ä½è§£åƒåº¦
    max_height: 240
    quality_vs_speed: 0.2           # é€Ÿåº¦é‡è¦–

yolo:
  device:
    preferred: "cpu"                # CPUä½¿ç”¨
  optimization:
    half_precision: false           # CPU ã§ã¯ç„¡åŠ¹

mediapipe:
  pose:
    model_complexity: 0             # æœ€è»½é‡ãƒ¢ãƒ‡ãƒ«
  hands:
    enabled: false                  # ç„¡åŠ¹åŒ–
  face:
    enabled: false                  # ç„¡åŠ¹åŒ–

monitoring:
  interval_seconds: 5               # ç›£è¦–é–“éš”å»¶é•·
```

==== é«˜æ€§èƒ½ç’°å¢ƒå‘ã‘è¨­å®š
```yaml
# é«˜æ€§èƒ½ç’°å¢ƒæœ€é©åŒ–è¨­å®š
ai_optimization:
  target_fps: 30.0                  # é«˜FPS
  frame_optimization:
    max_width: 1280                 # é«˜è§£åƒåº¦
    max_height: 720
    quality_vs_speed: 0.8           # å“è³ªé‡è¦–

yolo:
  device:
    preferred: "cuda"               # GPUä½¿ç”¨
  optimization:
    half_precision: true            # åŠç²¾åº¦è¨ˆç®—
    tensorrt: true                  # TensorRTæœ€é©åŒ–

mediapipe:
  pose:
    model_complexity: 2             # é«˜ç²¾åº¦ãƒ¢ãƒ‡ãƒ«
  hands:
    enabled: true                   # æ‰‹æ¤œå‡ºæœ‰åŠ¹
  face:
    enabled: true                   # é¡”æ¤œå‡ºæœ‰åŠ¹

ai_optimization:
  gpu:
    memory_limit: 0.9               # GPU ãƒ¡ãƒ¢ãƒªä¸Šé™é«˜ã‚
  memory:
    cache_size_mb: 1024             # å¤§å®¹é‡ã‚­ãƒ£ãƒƒã‚·ãƒ¥
```

=== ğŸ“Š ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°æŒ‡æ¨™

==== ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™å€¤
[cols="2,2,2,2", options="header"]
|===
|ç’°å¢ƒ |ç›®æ¨™FPS |CPUä½¿ç”¨ç‡ |ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
|**ä½æ€§èƒ½** |8-10 FPS |<70% |<1GB
|**æ¨™æº–** |12-15 FPS |<80% |<2GB
|**é«˜æ€§èƒ½** |20-30 FPS |<70% |<4GB
|**ã‚µãƒ¼ãƒãƒ¼** |15+ FPS |<60% |<8GB
|===

==== ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°æ‰‹é †
1. **ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ¸¬å®š**: ç¾åœ¨ã®æ€§èƒ½æ¸¬å®š
2. **ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç‰¹å®š**: CPU/GPU/ãƒ¡ãƒ¢ãƒªã®åˆ¶ç´„ç‰¹å®š
3. **è¨­å®šèª¿æ•´**: ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«å¿œã˜ãŸè¨­å®šå¤‰æ›´
4. **åŠ¹æœæ¸¬å®š**: å¤‰æ›´å¾Œã®æ€§èƒ½æ¸¬å®š
5. **åå¾©æ”¹å–„**: ç›®æ¨™é”æˆã¾ã§åå¾©

== ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–è¨­å®š

=== ğŸ”’ åŸºæœ¬ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

==== æœ¬ç•ªç’°å¢ƒã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
```yaml
# æœ¬ç•ªç’°å¢ƒã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–
security:
  # ãƒ‡ãƒ¼ã‚¿ä¿è­·å¼·åŒ–
  data_protection:
    encrypt_sensitive_data: true
    anonymize_logs: true
    secure_delete: true             # å®‰å…¨å‰Šé™¤
    data_retention_days: 30         # çŸ­æœŸä¿æŒ
    
  # ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡å¼·åŒ–
  access_control:
    ip_whitelist:                   # IPåˆ¶é™
      - "192.168.1.0/24"
      - "10.0.0.0/8"
    rate_limiting:
      enabled: true
      requests_per_minute: 60
      
  # SSL/TLSå¼·åŒ–
  ssl:
    min_version: "TLSv1.2"          # æœ€å°TLSãƒãƒ¼ã‚¸ãƒ§ãƒ³
    cipher_suites:                  # è¨±å¯ã•ã‚Œã‚‹æš—å·ã‚¹ã‚¤ãƒ¼ãƒˆ
      - "ECDHE-RSA-AES256-GCM-SHA384"
      - "ECDHE-RSA-AES128-GCM-SHA256"
      
  # ãƒ˜ãƒƒãƒ€ãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
  headers:
    x_frame_options: "DENY"
    x_content_type_options: "nosniff"
    x_xss_protection: "1; mode=block"
    strict_transport_security: "max-age=31536000; includeSubDomains"
```

=== ğŸ” æ©Ÿå¯†æƒ…å ±ç®¡ç†

==== ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹æ©Ÿå¯†æƒ…å ±ç®¡ç†
```bash
# æ©Ÿå¯†æƒ…å ±ã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†
export KANSHICHAN_SECRET_KEY="your-secret-key"
export KANSHICHAN_ENCRYPTION_KEY="your-encryption-key"
export LINE_NOTIFY_TOKEN="your-line-token"
export SSL_CERT_PASSPHRASE="your-cert-passphrase"
```

==== HashiCorp Vaulté€£æºï¼ˆä¼æ¥­ç’°å¢ƒï¼‰
```yaml
# Vaulté€£æºè¨­å®š
vault:
  enabled: false                    # ä¼æ¥­ç’°å¢ƒã§ã®ã¿æœ‰åŠ¹
  endpoint: "https://vault.company.com"
  auth_method: "kubernetes"
  secret_path: "secret/kanshichan"
```

== ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

=== âš ï¸ ã‚ˆãã‚ã‚‹è¨­å®šå•é¡Œ

==== è¨­å®šèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼
[cols="3,4,3", options="header"]
|===
|å•é¡Œ |åŸå›  |å¯¾å‡¦æ³•
|**è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„** |ãƒ‘ã‚¹é–“é•ã„ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ä¸å­˜åœ¨ |ãƒ‘ã‚¹ç¢ºèªãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
|**YAMLæ§‹æ–‡ã‚¨ãƒ©ãƒ¼** |ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãƒ»å¼•ç”¨ç¬¦ã®å•é¡Œ |YAML ãƒãƒªãƒ‡ãƒ¼ã‚¿ã§ç¢ºèª
|**è¨­å®šå€¤å‹ã‚¨ãƒ©ãƒ¼** |æ–‡å­—åˆ—ãƒ»æ•°å€¤ã®å‹ä¸ä¸€è‡´ |ãƒ‡ãƒ¼ã‚¿å‹ã‚’æ­£ã—ãè¨­å®š
|**å¿…é ˆé …ç›®ä¸è¶³** |å¿…é ˆè¨­å®šé …ç›®ã®æ¬ è½ |å¿…é ˆé …ç›®ã‚’è¿½åŠ 
|**æ¨©é™ã‚¨ãƒ©ãƒ¼** |ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿æ›¸ãæ¨©é™ä¸è¶³ |ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™ã‚’ä¿®æ­£
|===

==== ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ
[cols="3,4,3", options="header"]
|===
|å•é¡Œ |åŸå›  |å¯¾å‡¦æ³•
|**FPS ãŒç›®æ¨™å€¤æœªé”** |CPU/GPUè² è·éå¤š |è§£åƒåº¦ãƒ»FPSè¨­å®šã‚’ä¸‹ã’ã‚‹
|**ãƒ¡ãƒ¢ãƒªä¸è¶³** |ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚ºéå¤§ |ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚ºã‚’å‰Šæ¸›
|**GPUåˆ©ç”¨ä¸å¯** |CUDAç’°å¢ƒä¸å‚™ |CPU ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
|**èµ·å‹•æ™‚é–“éé•·** |ãƒ¢ãƒ‡ãƒ«èª­ã¿è¾¼ã¿æ™‚é–“ |è»½é‡ãƒ¢ãƒ‡ãƒ«ã«å¤‰æ›´
|**ã‚¢ãƒ©ãƒ¼ãƒˆé…å»¶** |å‡¦ç†ãƒãƒƒã‚¯ãƒ­ã‚° |ç›£è¦–é–“éš”ã‚’èª¿æ•´
|===

=== ğŸ” è¨ºæ–­ãƒ„ãƒ¼ãƒ«

==== è¨­å®šè¨ºæ–­ã‚³ãƒãƒ³ãƒ‰
```bash
# è¨­å®šç·åˆè¨ºæ–­
python -m kanshichan.tools.config diagnose

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ºæ–­
python -m kanshichan.tools.config perf-test --duration 60

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨ºæ–­
python -m kanshichan.tools.config security-check
```

==== ãƒ­ã‚°åˆ†æ
```bash
# è¨­å®šé–¢é€£ã‚¨ãƒ©ãƒ¼ã‚’æŠ½å‡º
grep "ConfigError\|ValidationError" logs/kanshichan.log

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œã‚’åˆ†æ
grep "FPS\|Performance\|Memory" logs/kanshichan.log | tail -100
```

== ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

=== ğŸ“– å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
* **<<backend-architecture>>**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
* **<<installation-setup>>**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
* **<<detection-system>>**: AIæ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ è©³ç´°
* **<<performance-optimization>>**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

=== ğŸ”— è¨­å®šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
* **é–‹ç™ºç’°å¢ƒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: `config/templates/development.yaml`
* **æœ¬ç•ªç’°å¢ƒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: `config/templates/production.yaml`
* **Dockerç’°å¢ƒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: `config/templates/docker.yaml`
* **é«˜æ€§èƒ½ç’°å¢ƒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: `config/templates/high-performance.yaml`

---

**ğŸ“ Contact**: team@kanshichan.dev +
**ğŸ”— Repository**: https://github.com/kanshichan/backend +
**ğŸ“… Last Updated**: {docdate} +
**ğŸ“ Document Version**: {revnumber} 