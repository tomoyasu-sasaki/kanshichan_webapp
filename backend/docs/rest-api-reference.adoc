= ğŸŒ ç›£è¦–ã¡ã‚ƒã‚“(KanshiChan) REST API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
:toc: left
:toc-title: ç›®æ¬¡
:toclevels: 4
:numbered:
:source-highlighter: highlight.js
:icons: font
:doctype: book
:version: 2.0.0
:author: KanshiChan Development Team
:email: team@kanshichan.dev
:revnumber: 2.0
:revdate: {docdate}
:experimental:

== ğŸ“– æ¦‚è¦

ç›£è¦–ã¡ã‚ƒã‚“ï¼ˆKanshiChanï¼‰ã®REST APIä»•æ§˜æ›¸ã§ã™ã€‚
ã“ã®APIã¯ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡Œå‹•ç›£è¦–ãƒ»åˆ†æã‚·ã‚¹ãƒ†ãƒ ã®å…¨æ©Ÿèƒ½ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚

[NOTE]
====
ğŸ“‹ **APIæƒ…å ±**

* **ãƒ™ãƒ¼ã‚¹URL**: `http://localhost:8000/api`
* **ãƒ—ãƒ­ãƒˆã‚³ãƒ«**: HTTP/1.1
* **èªè¨¼**: ãªã—ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«å°‚ç”¨ï¼‰
* **ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼**: JSON
* **API ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.0
* **æœ€çµ‚æ›´æ–°**: {docdate}
====

== ğŸ¯ APIæ¦‚è¦

=== ğŸ’¡ è¨­è¨ˆåŸå‰‡

* **RESTful**: æ¨™æº–çš„ãªRESTè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã«æº–æ‹ 
* **çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§çµ±ä¸€ã•ã‚ŒãŸãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
* **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: è©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±ã¨ã‚³ãƒ¼ãƒ‰ã®æä¾›
* **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: é«˜é€Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ãƒšãƒ¼ã‚¸ãƒ³ã‚°å¯¾å¿œ
* **æ‹¡å¼µæ€§**: å°†æ¥ã®æ©Ÿèƒ½æ‹¡å¼µã«å¯¾å¿œã—ãŸè¨­è¨ˆ

=== ğŸ“Š ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆåˆ†é¡

[cols="2,3,2", options="header"]
|===
|ã‚«ãƒ†ã‚´ãƒª |èª¬æ˜ |ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ•°
|**ğŸ” Basic Analysis** |åŸºæœ¬çš„ãªè¡Œå‹•åˆ†æãƒ»ãƒˆãƒ¬ãƒ³ãƒ‰ |4å€‹
|**ğŸ§  Advanced Analysis** |é«˜åº¦ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æãƒ»æ©Ÿæ¢°å­¦ç¿’ |4å€‹
|**ğŸ”® Prediction Analysis** |äºˆæ¸¬ãƒ»ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ |4å€‹
|**âš¡ Realtime Analysis** |ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å‡¦ç† |4å€‹
|**ğŸ“Š Behavior Data** |è¡Œå‹•ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿æ“ä½œ |4å€‹
|**ğŸ”Š TTS System** |éŸ³å£°åˆæˆãƒ»TTSæ©Ÿèƒ½ |15å€‹
|**ğŸ“ˆ Monitoring** |ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ãƒ»ç®¡ç† |4å€‹
|===

== ğŸ” Basic Analysis API

åŸºæœ¬çš„ãªè¡Œå‹•åˆ†ææ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¾¤

=== GET /api/analysis/status

==== æ¦‚è¦
åˆ†æã‚·ã‚¹ãƒ†ãƒ ã®ç¾åœ¨çŠ¶æ…‹ã‚’å–å¾—

==== ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
ãªã—

==== ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹
```json
{
  "status": "success",
  "data": {
    "system_status": "operational",
    "active_analyzers": 3,
    "detection_status": {
      "yolo_enabled": true,
      "mediapipe_enabled": true,
      "fps": 15.2
    },
    "analysis_capabilities": {
      "behavior_analysis": true,
      "pattern_recognition": true,
      "predictive_modeling": true
    },
    "performance": {
      "cpu_usage": 45.2,
      "memory_usage": 1200,
      "gpu_usage": 60.5
    }
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

=== GET /api/analysis/trends

==== æ¦‚è¦
æŒ‡å®šæœŸé–“ã®è¡Œå‹•ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’åˆ†æ

==== ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
[cols="2,1,1,4", options="header"]
|===
|ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |å‹ |å¿…é ˆ |èª¬æ˜
|`timeframe` |string |âŒ |åˆ†ææœŸé–“ (`hourly`/`daily`/`weekly`) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `daily`
|`user_id` |string |âŒ |ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
|===

==== ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹
```json
{
  "status": "success",
  "data": {
    "timeframe": "daily",
    "period_start": "2024-01-14T00:00:00Z",
    "period_end": "2024-01-15T00:00:00Z",
    "total_logs": 2772,
    "focus_analysis": {
      "average_focus": 0.48,
      "good_posture_percentage": 0.85,
      "presence_rate": 0.91,
      "smartphone_usage_rate": 0.012,
      "total_sessions": 9,
      "trend_direction": "stable"
    },
    "hourly_patterns": [
      {
        "hour": 9,
        "focus_score": 0.65,
        "activity_level": "high"
      }
    ]
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

=== GET /api/analysis/insights

==== æ¦‚è¦
æ—¥æ¬¡ã‚¤ãƒ³ã‚µã‚¤ãƒˆã¨æ”¹å–„ææ¡ˆã‚’å–å¾—

==== ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
[cols="2,1,1,4", options="header"]
|===
|ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |å‹ |å¿…é ˆ |èª¬æ˜
|`user_id` |string |âŒ |ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
|`days` |integer |âŒ |åˆ†æå¯¾è±¡æ—¥æ•° (1-30) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 7
|`include_recommendations` |boolean |âŒ |æ¨å¥¨äº‹é …ã‚’å«ã‚ã‚‹ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `true`
|===

=== GET /api/analysis/recommendations

==== æ¦‚è¦
ç¾åœ¨ã®è¡Œå‹•çŠ¶æ³ã«åŸºã¥ãæ¨å¥¨äº‹é …ã‚’å–å¾—

==== ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
[cols="2,1,1,4", options="header"]
|===
|ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |å‹ |å¿…é ˆ |èª¬æ˜
|`user_id` |string |âŒ |ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
|`priority` |string |âŒ |å„ªå…ˆåº¦ãƒ•ã‚£ãƒ«ã‚¿ (`high`/`medium`/`low`)
|`limit` |integer |âŒ |æœ€å¤§è¿”å´æ•° (1-20) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 5
|===

== ğŸ§  Advanced Analysis API

é«˜åº¦ãªãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æã¨æ©Ÿæ¢°å­¦ç¿’æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¾¤

=== GET /api/analysis/advanced-patterns

==== æ¦‚è¦
é«˜åº¦ãªè¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æã¨æ©Ÿæ¢°å­¦ç¿’ãƒ™ãƒ¼ã‚¹ã®æ´å¯Ÿã‚’æä¾›

==== ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
[cols="2,1,1,4", options="header"]
|===
|ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |å‹ |å¿…é ˆ |èª¬æ˜
|`timeframe` |string |âŒ |åˆ†ææœŸé–“ (`hourly`/`daily`/`weekly`/`monthly`) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `daily`
|`user_id` |string |âŒ |ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
|`pattern_type` |string |âŒ |ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¿ã‚¤ãƒ— (`cyclical`/`trending`/`seasonal`/`all`) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `all`
|===

=== GET /api/analysis/focus-deep-dive

==== æ¦‚è¦
é›†ä¸­åº¦ã«é–¢ã™ã‚‹è©³ç´°ãªåˆ†æã¨å“è³ªè©•ä¾¡ã‚’æä¾›

==== ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
[cols="2,1,1,4", options="header"]
|===
|ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |å‹ |å¿…é ˆ |èª¬æ˜
|`user_id` |string |âŒ |ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
|`hours` |integer |âŒ |åˆ†æå¯¾è±¡æ™‚é–“ (1-720) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 24
|`include_sessions` |boolean |âŒ |ã‚»ãƒƒã‚·ãƒ§ãƒ³è©³ç´°ã‚’å«ã‚ã‚‹ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `true`
|===

=== GET /api/analysis/health-assessment

==== æ¦‚è¦
å§¿å‹¢ã€å¥åº·çŠ¶æ…‹ã€ãƒªã‚¹ã‚¯ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã‚’æä¾›

=== GET /api/analysis/productivity-score

==== æ¦‚è¦
ä½œæ¥­åŠ¹ç‡ã€ç”Ÿç”£æ€§æŒ‡æ¨™ã€æ´»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æã‚’æä¾›

== ğŸ”® Prediction Analysis API

æ©Ÿæ¢°å­¦ç¿’ãƒ™ãƒ¼ã‚¹ã®äºˆæ¸¬åˆ†æã¨ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½

=== GET /api/analysis/predictions

==== æ¦‚è¦
æ©Ÿæ¢°å­¦ç¿’ãƒ™ãƒ¼ã‚¹ã®è¡Œå‹•äºˆæ¸¬ã¨å°†æ¥ã®ãƒ‘ã‚¿ãƒ¼ãƒ³äºˆæ¸¬

==== ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
[cols="2,1,1,4", options="header"]
|===
|ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |å‹ |å¿…é ˆ |èª¬æ˜
|`user_id` |string |âŒ |ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
|`metrics` |string |âŒ |äºˆæ¸¬å¯¾è±¡æŒ‡æ¨™ (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `focus_score,posture_score`
|`horizon` |integer |âŒ |äºˆæ¸¬æ™‚é–“ï¼ˆåˆ†ï¼‰ (5-1440) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 60
|===

=== GET /api/analysis/personalized-recommendations

==== æ¦‚è¦
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å€‹äººç‰¹æ€§ã¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«åŸºã¥ã„ãŸæœ€é©åŒ–ã•ã‚ŒãŸæ¨å¥¨äº‹é …

=== GET /api/analysis/user-profile

==== æ¦‚è¦
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡Œå‹•ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¨å­¦ç¿’æ¸ˆã¿ç‰¹æ€§

=== POST /api/analysis/adaptive-learning

==== æ¦‚è¦
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«åŸºã¥ãé©å¿œå­¦ç¿’

== âš¡ Realtime Analysis API

ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã¨ç›£è¦–æ©Ÿèƒ½

=== POST /api/analysis/realtime-stream

==== æ¦‚è¦
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ†æç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ 

==== ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
```json
{
  "user_id": "string",
  "data": {
    "eye_movement": {...},
    "pose_data": {...},
    "environment": {...}
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

=== GET /api/analysis/stream-status

==== æ¦‚è¦
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®ç¾åœ¨çŠ¶æ…‹

=== GET /api/analysis/alerts

==== æ¦‚è¦
ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¢ãƒ©ãƒ¼ãƒˆã¨é€šçŸ¥ã‚’å–å¾—

=== GET /api/analysis/performance-report

==== æ¦‚è¦
ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ

== ğŸ“Š Behavior Data API

è¡Œå‹•ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€æ“ä½œã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

=== GET /api/behavior/logs

==== æ¦‚è¦
è¡Œå‹•ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ï¼ˆãƒšãƒ¼ã‚¸ãƒ³ã‚°ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯¾å¿œï¼‰

==== ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
[cols="2,1,1,4", options="header"]
|===
|ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |å‹ |å¿…é ˆ |èª¬æ˜
|`page` |integer |âŒ |ãƒšãƒ¼ã‚¸ç•ªå· (1ã‹ã‚‰é–‹å§‹) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1
|`per_page` |integer |âŒ |1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•° (1-100) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20
|`start_date` |string |âŒ |é–‹å§‹æ—¥æ™‚ (ISO 8601å½¢å¼)
|`end_date` |string |âŒ |çµ‚äº†æ—¥æ™‚ (ISO 8601å½¢å¼)
|`user_id` |string |âŒ |ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
|`focus_min` |float |âŒ |æœ€ä½é›†ä¸­åº¦ (0.0-1.0)
|`focus_max` |float |âŒ |æœ€é«˜é›†ä¸­åº¦ (0.0-1.0)
|`smartphone_detected` |boolean |âŒ |ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³æ¤œå‡ºãƒ•ã‚£ãƒ«ã‚¿
|`presence_status` |string |âŒ |åœ¨å¸­çŠ¶æ…‹ (`present`/`absent`/`unknown`)
|`order_by` |string |âŒ |ã‚½ãƒ¼ãƒˆé † (`timestamp_asc`/`timestamp_desc`) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `timestamp_desc`
|===

==== ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹
```json
{
  "status": "success",
  "data": {
    "logs": [
      {
        "id": 1,
        "timestamp": "2024-01-15T10:30:00Z",
        "person_detected": true,
        "smartphone_detected": false,
        "presence_status": "present",
        "posture_score": 0.85,
        "attention_level": 0.72
      }
    ],
    "pagination": {
      "page": 1,
      "per_page": 20,
      "total": 2772,
      "pages": 139
    }
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

=== GET /api/behavior/summary

==== æ¦‚è¦
æŒ‡å®šæœŸé–“ã®è¡Œå‹•ãƒ‡ãƒ¼ã‚¿ã®çµ±è¨ˆã‚µãƒãƒªãƒ¼

=== GET /api/behavior/stats

==== æ¦‚è¦
æœŸé–“åˆ¥ã®è©³ç´°ãªçµ±è¨ˆæƒ…å ±

=== GET /api/behavior/export

==== æ¦‚è¦
è¡Œå‹•ãƒ‡ãƒ¼ã‚¿ã®CSV/JSONå½¢å¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

== ğŸ”Š TTS System API

éŸ³å£°åˆæˆãƒ»TTSæ©Ÿèƒ½ã¨ãƒœã‚¤ã‚¹ç®¡ç†

=== ğŸ¤ éŸ³å£°åˆæˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

==== POST /api/tts/synthesize

éŸ³å£°åˆæˆå®Ÿè¡ŒAPI

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
[cols="2,1,1,4", options="header"]
|===
|ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |å‹ |å¿…é ˆ |èª¬æ˜
|`text` |string |âœ… |åˆæˆã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ
|`voice_id` |string |âŒ |éŸ³å£°ID ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: default
|`emotion` |string |âŒ |æ„Ÿæƒ… (`happy`/`sad`/`angry`/`neutral`) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `neutral`
|`speed` |float |âŒ |è©±é€Ÿ (0.5-2.0) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0
|`pitch` |float |âŒ |ãƒ”ãƒƒãƒ (0.5-2.0) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0
|===

==== GET /api/tts/voices

åˆ©ç”¨å¯èƒ½ãªéŸ³å£°ä¸€è¦§å–å¾—

==== POST /api/tts/voice-clone

éŸ³å£°ã‚¯ãƒ­ãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆã‚«ã‚¹ã‚¿ãƒ éŸ³å£°ä½œæˆï¼‰

=== ğŸµ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†

==== GET /api/tts/stream

ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°

==== GET /api/tts/files

éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—

==== DELETE /api/tts/files/{file_id}

éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤

=== âš™ï¸ ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†

==== GET /api/tts/status

TTSã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹å–å¾—

==== POST /api/tts/configure

TTSè¨­å®šæ›´æ–°

== ğŸ“ˆ Monitoring API

ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ã¨ç®¡ç†æ©Ÿèƒ½

=== GET /api/monitor/status

==== æ¦‚è¦
ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®ç·åˆçš„ãªçŠ¶æ…‹å–å¾—

==== ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹
```json
{
  "status": "success",
  "data": {
    "monitor_status": "active",
    "fps": 15.2,
    "detection_active": true,
    "alerts_count": 0,
    "uptime_seconds": 3600,
    "performance": {
      "cpu_usage": 45.2,
      "memory_mb": 1200,
      "gpu_usage": 60.5
    }
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

=== POST /api/monitor/start

ç›£è¦–é–‹å§‹

=== POST /api/monitor/stop

ç›£è¦–åœæ­¢

=== GET /api/monitor/metrics

è©³ç´°ãªã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—

== ğŸ“‹ å…±é€šä»•æ§˜

=== ğŸ”„ ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

å…¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã®çµ±ä¸€å½¢å¼ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ï¼š

==== æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "status": "success",
  "data": { /* ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå›ºæœ‰ã®ãƒ‡ãƒ¼ã‚¿ */ },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

==== ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "status": "error",
  "error": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
  "code": "ERROR_CODE",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

=== âš ï¸ ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰

[cols="2,1,4", options="header"]
|===
|ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ |HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |èª¬æ˜
|`VALIDATION_ERROR` |400 |ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¤œè¨¼ã‚¨ãƒ©ãƒ¼
|`SERVICE_UNAVAILABLE` |500 |ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨ã§ããªã„
|`ANALYSIS_ERROR` |500 |åˆ†æå‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
|`DATA_NOT_FOUND` |404 |è¦æ±‚ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã„
|`PROCESSING_ERROR` |500 |ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
|`AUTHENTICATION_ERROR` |401 |èªè¨¼ã‚¨ãƒ©ãƒ¼
|`RATE_LIMIT_EXCEEDED` |429 |ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ãŸ
|===

=== ğŸ“Š ãƒšãƒ¼ã‚¸ãƒ³ã‚°

å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã¯ã€ãƒšãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ï¼š

```json
{
  "data": {
    "items": [...],
    "pagination": {
      "page": 1,
      "per_page": 20,
      "total": 2772,
      "pages": 139,
      "has_prev": false,
      "has_next": true
    }
  }
}
```

=== ğŸ• æ—¥æ™‚å½¢å¼

å…¨ã¦ã®æ—¥æ™‚ã¯ISO 8601å½¢å¼ï¼ˆUTCï¼‰ã§è¡¨ç¾ã—ã¾ã™ï¼š
`2024-01-15T10:30:00Z`

=== ğŸ›ï¸ ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

å¤šãã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æä¾›ï¼š

* **æ™‚é–“ç¯„å›²**: `start_date`, `end_date`
* **ãƒ¦ãƒ¼ã‚¶ãƒ¼**: `user_id`
* **æ•°å€¤ç¯„å›²**: `min_value`, `max_value`
* **ã‚«ãƒ†ã‚´ãƒª**: ç‰¹å®šã®å€¤ã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

== ğŸš€ åˆ©ç”¨ä¾‹ã¨ã‚µãƒ³ãƒ—ãƒ«

=== ğŸ“Š åŸºæœ¬çš„ãªç›£è¦–ãƒ‡ãƒ¼ã‚¿å–å¾—

```javascript
// ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ã‚’å–å¾—
const response = await fetch('/api/monitor/status');
const status = await response.json();

// éå»24æ™‚é–“ã®è¡Œå‹•ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’å–å¾—
const trends = await fetch('/api/analysis/trends?timeframe=daily');
const trendData = await trends.json();

// è¡Œå‹•ãƒ­ã‚°ã‚’å–å¾—ï¼ˆæœ€æ–°20ä»¶ï¼‰
const logs = await fetch('/api/behavior/logs?per_page=20&order_by=timestamp_desc');
const logData = await logs.json();
```

=== ğŸ”Š éŸ³å£°åˆæˆã®åˆ©ç”¨

```javascript
// éŸ³å£°åˆæˆå®Ÿè¡Œ
const audioResponse = await fetch('/api/tts/synthesize', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    text: 'é›†ä¸­ã—ã¦ãã ã•ã„',
    emotion: 'encouraging',
    voice_id: 'default'
  })
});

const audioBlob = await audioResponse.blob();
const audio = new Audio(URL.createObjectURL(audioBlob));
audio.play();
```

=== ğŸ“ˆ é«˜åº¦ãªåˆ†æã®æ´»ç”¨

```javascript
// é«˜åº¦ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
const patterns = await fetch('/api/analysis/advanced-patterns?pattern_type=all&timeframe=weekly');
const patternData = await patterns.json();

// äºˆæ¸¬åˆ†æ
const predictions = await fetch('/api/analysis/predictions?metrics=focus_score&horizon=120');
const predictionData = await predictions.json();

// ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºãƒ‰æ¨å¥¨
const recommendations = await fetch('/api/analysis/personalized-recommendations?user_id=user123');
const recsData = await recommendations.json();
```

== ğŸ”§ é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰

=== ğŸ“ APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…

==== Pythonä¾‹
```python
import requests
import json

class KanshiChanAPI:
    def __init__(self, base_url="http://localhost:8000/api"):
        self.base_url = base_url
    
    def get_status(self):
        response = requests.get(f"{self.base_url}/monitor/status")
        return response.json()
    
    def get_trends(self, timeframe="daily"):
        response = requests.get(f"{self.base_url}/analysis/trends", 
                               params={"timeframe": timeframe})
        return response.json()
    
    def synthesize_speech(self, text, emotion="neutral"):
        response = requests.post(f"{self.base_url}/tts/synthesize",
                                json={"text": text, "emotion": emotion})
        return response.content
```

==== TypeScriptä¾‹
```typescript
interface APIResponse<T> {
  status: 'success' | 'error';
  data?: T;
  error?: string;
  code?: string;
  timestamp: string;
}

class KanshiChanAPI {
  constructor(private baseUrl = 'http://localhost:8000/api') {}
  
  async getStatus(): Promise<APIResponse<any>> {
    const response = await fetch(`${this.baseUrl}/monitor/status`);
    return response.json();
  }
  
  async getTrends(timeframe = 'daily'): Promise<APIResponse<any>> {
    const response = await fetch(`${this.baseUrl}/analysis/trends?timeframe=${timeframe}`);
    return response.json();
  }
}
```

=== ğŸ›¡ï¸ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```javascript
async function safeAPICall(url, options = {}) {
  try {
    const response = await fetch(url, options);
    const data = await response.json();
    
    if (data.status === 'error') {
      throw new Error(`API Error: ${data.error} (${data.code})`);
    }
    
    return data.data;
  } catch (error) {
    console.error('API call failed:', error);
    throw error;
  }
}
```

=== âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

* **ãƒãƒƒãƒãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: è¤‡æ•°ãƒ‡ãƒ¼ã‚¿ã®ä¸€æ‹¬å–å¾—
* **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨**: å¤‰æ›´é »åº¦ã®ä½ã„ãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥
* **ãƒšãƒ¼ã‚¸ãƒ³ã‚°**: å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®æ®µéšçš„èª­ã¿è¾¼ã¿
* **WebSocketä½µç”¨**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã¯WebSocketã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯REST API

== ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

=== ğŸ“– å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
* **<<backend-architecture>>**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
* **<<detection-system>>**: AIæ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ è©³ç´°
* **<<configuration-guide>>**: è¨­å®šãƒ»ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¬ã‚¤ãƒ‰
* **<<websocket-api>>**: WebSocket APIä»•æ§˜

=== ğŸ”— é–‹ç™ºãƒ„ãƒ¼ãƒ«
* **Postman Collection**: API ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
* **OpenAPI Spec**: Swagger/OpenAPI 3.0ä»•æ§˜æ›¸
* **SDK**: Python, TypeScript, JavaScript ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆSDK

---

**ğŸ“ Contact**: team@kanshichan.dev +
**ğŸ”— Repository**: https://github.com/kanshichan/backend +
**ğŸ“… Last Updated**: {docdate} +
**ğŸ“ Document Version**: {revnumber} 